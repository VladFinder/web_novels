(()=>{"use strict";var e={253:(e,t,n)=>{e.exports=n.p+"img/Ð Ð°Ð·Ð´Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ.800c2a94.png"},473:(e,t,n)=>{var o=n(130),r=n(768);const a={id:"app"};function s(e,t,n,o,s,i){const c=(0,r.g2)("LoadingScreen"),l=(0,r.g2)("EmotionSelect"),m=(0,r.g2)("MainScreen"),d=(0,r.g2)("CalendarScreen");return(0,r.uX)(),(0,r.CE)("div",a,["loading"===s.currentScreen?((0,r.uX)(),(0,r.Wv)(c,{key:0})):"emotion"===s.currentScreen?((0,r.uX)(),(0,r.Wv)(l,{key:1,onEmotionSelected:i.handleEmotionSelect,onNavigate:i.handleNavigate},null,8,["onEmotionSelected","onNavigate"])):"main"===s.currentScreen?((0,r.uX)(),(0,r.Wv)(m,{key:2,onOpenSettings:i.openSettings,onOpenCalendar:i.openCalendar},null,8,["onOpenSettings","onOpenCalendar"])):"calendar"===s.currentScreen?((0,r.uX)(),(0,r.Wv)(d,{key:3,onBack:i.backToMain},null,8,["onBack"])):(0,r.Q3)("",!0)])}const i=n.p+"img/logo.ff1a5e98.png",c={class:"loading-screen"};function l(e,t,n,o,a,s){return(0,r.uX)(),(0,r.CE)("div",c,t[0]||(t[0]=[(0,r.Lk)("div",{class:"loading-content"},[(0,r.Lk)("img",{src:i,alt:"Logo",class:"logo"}),(0,r.Lk)("p",{class:"loading-text"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...")],-1)]))}const m={name:"LoadingScreen"};var d=n(241);const g=(0,d.A)(m,[["render",l],["__scopeId","data-v-4f683444"]]),h=g;var u=n(232);const p={key:0,class:"emotion-select"},w={class:"glass-container"},y={key:0,class:"loading-overlay"},f={class:"emotions-grid"},S=["onClick"],k=["src","alt"],v={class:"emotion-name"},E={key:1,class:"emotion-already-selected"},b={class:"selected-emotion-card"},I={class:"selected-emotion"},L=["src","alt"],C={class:"emotion-name"},T={class:"buttons-container"};function M(e,t,n,o,a,s){return a.emotionAlreadySelected?((0,r.uX)(),(0,r.CE)("div",E,[(0,r.Lk)("div",b,[t[4]||(t[4]=(0,r.Lk)("h2",null,"Ð¡ÐµÐ³Ð¾Ð´Ð½Ñ Ñ‚Ñ‹ ÑƒÐ¶Ðµ Ð²Ñ‹Ð±Ñ€Ð°Ð» ÑÐ¼Ð¾Ñ†Ð¸ÑŽ",-1)),(0,r.Lk)("div",I,[(0,r.Lk)("img",{src:s.getSelectedEmotionIcon(),alt:s.getSelectedEmotionName(),class:"emotion-icon-large"},null,8,L),(0,r.Lk)("p",C,(0,u.v_)(s.getSelectedEmotionName()),1)]),t[5]||(t[5]=(0,r.Lk)("p",{class:"message"},"Ð—Ð°Ð²Ñ‚Ñ€Ð° ÑÐ¼Ð¾Ð¶ÐµÑˆÑŒ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð½Ð¾Ð²ÑƒÑŽ ÑÐ¼Ð¾Ñ†Ð¸ÑŽ!",-1)),(0,r.Lk)("div",T,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.goToCalendar&&s.goToCalendar(...e)),class:"calendar-btn"},"ÐŸÐ¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ ÐºÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ"),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>s.goToMain&&s.goToMain(...e)),class:"close-btn"},"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ")])])])):((0,r.uX)(),(0,r.CE)("div",p,[t[3]||(t[3]=(0,r.Lk)("h1",{class:"title"},"ÐšÐ°Ðº Ñ‚Ñ‹ ÑÐµÐ±Ñ Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÐµÑˆÑŒ?",-1)),(0,r.Lk)("div",w,[a.isLoading?((0,r.uX)(),(0,r.CE)("div",y,t[2]||(t[2]=[(0,r.Lk)("div",{class:"loading-spinner"},null,-1),(0,r.Lk)("p",null,"Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ÑÐ¼Ð¾Ñ†Ð¸ÑŽ...",-1)]))):(0,r.Q3)("",!0),(0,r.Lk)("div",f,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.emotions,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,u.C4)(["emotion-item",{disabled:a.isLoading}]),onClick:t=>s.selectEmotion(e.id)},[(0,r.Lk)("img",{src:e.icon,alt:e.name},null,8,k),(0,r.Lk)("span",v,(0,u.v_)(e.name),1)],10,S)))),128))])])]))}class U{constructor(){this.apiUrl="https://ikiteam.ru/api",this.userId=null}getApiUrl(){return this.apiUrl}async saveEmotion(e,{emotion:t,note:n,timestamp:o,username:r}){try{const a=this.getApiUrl();console.log("ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÐ¼ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€:",`${a}/emotions`),console.log("Ð”Ð°Ð½Ð½Ñ‹Ðµ:",{telegramId:e,emotion:t,note:n,timestamp:o,username:r});const s=await fetch(`${a}/emotions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telegramId:e,emotion:t,note:n,timestamp:o,username:r})});if(console.log("ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½ Ð¾Ñ‚Ð²ÐµÑ‚ Ð¾Ñ‚ ÑÐµÑ€Ð²ÐµÑ€Ð°:",s.status,s.statusText),!s.ok){const e=await s.json();throw console.error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°:",e),new Error(e.error||`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐ¼Ð¾Ñ†Ð¸Ð¸ (${s.status})`)}const i=await s.json();return console.log("Ð­Ð¼Ð¾Ñ†Ð¸Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð° Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ:",i),i}catch(a){if(console.error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐ¼Ð¾Ñ†Ð¸Ð¸:",a),"TypeError"===a.name&&a.message.includes("fetch"))throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚-ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ðµ.");throw a}}async getUserEmotions(e,t,n){try{const o=this.getApiUrl(),r=new URLSearchParams({telegramId:String(e),startDate:t.toISOString(),endDate:n.toISOString()}),a=await fetch(`${o}/emotions?${r}`);if(!a.ok){const e=await a.json();throw new Error(e.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ ÑÐ¼Ð¾Ñ†Ð¸Ð¹")}return await a.json()}catch(o){throw console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ ÑÐ¼Ð¾Ñ†Ð¸Ð¹:",o),o}}async getEmotionByDate(e,t){try{const n=this.getApiUrl(),o=new Date(t).toISOString().split("T")[0],r=await fetch(`${n}/emotions/${e}/${o}`);if(!r.ok){if(404===r.status)return null;const e=await r.json();throw new Error(e.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ ÑÐ¼Ð¾Ñ†Ð¸Ð¸")}return await r.json()}catch(n){return console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ ÑÐ¼Ð¾Ñ†Ð¸Ð¸ Ð¿Ð¾ Ð´Ð°Ñ‚Ðµ:",n),null}}async hasEmotionToday(e){try{const t=this.getApiUrl(),n=await fetch(`${t}/emotions/today/${e}`);if(!n.ok){const e=await n.json();throw new Error(e.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ ÑÐ¼Ð¾Ñ†Ð¸Ð¸")}const o=await n.json();return o.hasEmotion}catch(t){return console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ ÑÐ¼Ð¾Ñ†Ð¸Ð¸ Ð½Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ:",t),!1}}async updateNote(e,t,n){try{const o=this.getApiUrl(),r=await fetch(`${o}/emotions/note`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({telegramId:e,date:t,note:n})});if(!r.ok){const e=await r.json();throw new Error(e.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð·Ð°Ð¼ÐµÑ‚ÐºÐ¸")}const a=await r.json();return console.log("Ð—Ð°Ð¼ÐµÑ‚ÐºÐ° ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð° Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ:",a),a}catch(o){throw console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð·Ð°Ð¼ÐµÑ‚ÐºÐ¸:",o),o}}async getEmotionStats(e,t,n){try{const o=this.getApiUrl(),r=new URLSearchParams({startDate:t.toISOString(),endDate:n.toISOString()}),a=await fetch(`${o}/emotions/stats/${e}?${r}`);if(!a.ok){const e=await a.json();throw new Error(e.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸")}return await a.json()}catch(o){throw console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸:",o),o}}async exportUserData(e){try{const t=this.getApiUrl(),n=await fetch(`${t}/export/${e}`);if(!n.ok){const e=await n.json();throw new Error(e.error||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…")}return await n.json()}catch(t){throw console.error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…:",t),t}}async importUserData(e,t){try{const n=this.getApiUrl(),o=await fetch(`${n}/import/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok){const e=await o.json();throw new Error(e.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…")}return await o.json()}catch(n){throw console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…:",n),n}}async saveThought(e,t,n=null){try{const o=this.getApiUrl(),r=await fetch(`${o}/thoughts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telegramId:e,thought:t,date:n,timestamp:(new Date).toISOString()})});if(!r.ok){const e=await r.json();throw new Error(e.error||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¼Ñ‹ÑÐ»Ð¸")}const a=await r.json();return console.log("ÐœÑ‹ÑÐ»ÑŒ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð°:",a),a}catch(o){throw console.error("ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¼Ñ‹ÑÐ»Ð¸:",o),o}}async getUserThoughts(e,t,n){try{const o=this.getApiUrl(),r=new URLSearchParams({telegramId:String(e),startDate:t.toISOString(),endDate:n.toISOString()}),a=await fetch(`${o}/thoughts?${r}`);if(!a.ok){const e=await a.json();throw new Error(e.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¼Ñ‹ÑÐ»ÐµÐ¹")}return await a.json()}catch(o){throw console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¼Ñ‹ÑÐ»ÐµÐ¹:",o),o}}async getThoughtsByDate(e,t){try{const n=this.getApiUrl(),o=new Date(t).toISOString().split("T")[0],r=await fetch(`${n}/thoughts/${e}/${o}`);if(!r.ok){if(404===r.status)return[];const e=await r.json();throw new Error(e.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¼Ñ‹ÑÐ»ÐµÐ¹")}return await r.json()}catch(n){return console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¼Ñ‹ÑÐ»ÐµÐ¹ Ð¿Ð¾ Ð´Ð°Ñ‚Ðµ:",n),[]}}}const D=new U,O=window.Telegram?.WebApp,j=()=>O?.initDataUnsafe?.user?.id,$={name:"EmotionSelect",data(){return{telegramId:null,telegramUsername:null,isLoading:!1,emotionAlreadySelected:!1,selectedEmotion:null,emotions:[{id:1,name:"Ð Ð°Ð´Ð¾ÑÑ‚Ð½Ð¾",icon:n(562)},{id:2,name:"Ð“Ñ€ÑƒÑÑ‚Ð½Ð¾",icon:n(644)},{id:3,name:"Ð¡Ð¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾",icon:n(693)},{id:4,name:"Ð¢Ñ€ÐµÐ²Ð¾Ð¶Ð½Ð¾",icon:n(485)},{id:5,name:"Ð Ð°Ð·Ð´Ñ€Ð°Ð¶Ñ‘Ð½Ð½Ð¾",icon:n(253)},{id:6,name:"ÐœÐµÑ‡Ñ‚Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾",icon:n(815)}]}},async mounted(){if(console.log("ðŸ” EmotionSelect mounted"),console.log("ðŸ” Telegram WebApp:",window.Telegram?.WebApp),console.log("ðŸ” Telegram user:",window.Telegram?.WebApp?.initDataUnsafe?.user),this.telegramId=j(),this.telegramUsername=this.getTelegramUsername(),console.log("ðŸ” Telegram ID:",this.telegramId),console.log("ðŸ” Telegram Username:",this.telegramUsername),this.telegramId||(console.warn("âš ï¸ Telegram ID not found"),this.telegramId="debug_user_"+Date.now(),console.log("ðŸ” Using debug Telegram ID:",this.telegramId)),console.log("ðŸ” Checking if emotion already selected for today..."),this.emotionAlreadySelected=await D.hasEmotionToday(this.telegramId),console.log("ðŸ” Emotion already selected:",this.emotionAlreadySelected),this.emotionAlreadySelected){const e=(new Date).toISOString().split("T")[0];this.selectedEmotion=await D.getEmotionByDate(this.telegramId,e),console.log("ðŸ” Selected emotion:",this.selectedEmotion)}},methods:{getTelegramUsername(){return window.Telegram?.WebApp?.initDataUnsafe?.user?.username||window.Telegram?.WebApp?.initDataUnsafe?.user?.first_name||"ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ"},async selectEmotion(e){if(console.log("ðŸ” selectEmotion called with id:",e),console.log("ðŸ” Current state:",{isLoading:this.isLoading,telegramId:this.telegramId,telegramUsername:this.telegramUsername}),this.isLoading)console.log("ðŸ” Already loading, ignoring click");else{this.isLoading=!0,console.log("ðŸ” Set loading to true");try{let t=j();console.log("ðŸ” Got Telegram ID from function:",t),t||(console.warn("âš ï¸ Telegram ID not found in function"),t=this.telegramId,console.log("ðŸ” Using Telegram ID from component:",t));const n="",o=(new Date).toISOString(),r={telegramId:t,telegramUsername:this.telegramUsername,emotion:e,note:n,timestamp:o};console.log("ðŸ” Saving emotion data:",r);const a=await D.saveEmotion(t,{emotion:e,note:n,timestamp:o,username:this.telegramUsername});console.log("âœ… Emotion successfully saved:",a),this.emotionAlreadySelected=!0,this.selectedEmotion={emotion:e,note:n,timestamp:o,username:this.telegramUsername},this.$emit("emotion-selected",e)}catch(t){if(console.error("âŒ Error saving emotion:",t),console.error("âŒ Error details:",{name:t.name,message:t.message,stack:t.stack}),t.message.includes("Ð­Ð¼Ð¾Ñ†Ð¸Ñ Ð½Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ ÑƒÐ¶Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð°")){console.log("ðŸ” Emotion already saved, updating component state"),this.emotionAlreadySelected=!0;const e=(new Date).toISOString().split("T")[0];this.selectedEmotion=await D.getEmotionByDate(telegramId,e),alert("Ð­Ð¼Ð¾Ñ†Ð¸Ñ Ð½Ð° ÑÐµÐ³Ð¾Ð´Ð½Ñ ÑƒÐ¶Ðµ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð°. Ð—Ð°Ð²Ñ‚Ñ€Ð° ÑÐ¼Ð¾Ð¶ÐµÑ‚Ðµ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð½Ð¾Ð²ÑƒÑŽ ÑÐ¼Ð¾Ñ†Ð¸ÑŽ!")}else alert(`ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ ÑÐ¼Ð¾Ñ†Ð¸Ð¸: ${t.message}`)}finally{console.log("ðŸ” Set loading to false"),this.isLoading=!1}}},getSelectedEmotionIcon(){if(!this.selectedEmotion)return"";const e=this.emotions.find((e=>e.id===this.selectedEmotion.emotion));return e?e.icon:""},getSelectedEmotionName(){if(!this.selectedEmotion)return"";const e=this.emotions.find((e=>e.id===this.selectedEmotion.emotion));return e?e.name:""},goToCalendar(){this.$emit("navigate","calendar")},goToMain(){this.$emit("navigate","main")}}},A=(0,d.A)($,[["render",M],["__scopeId","data-v-2cdd8360"]]),x=A,X=n.p+"img/soul.f8a4fa77.png",_={class:"main-screen"},N={key:0,class:"user-login"},W={class:"buttons-row"};function Y(e,t,n,o,a,s){return(0,r.uX)(),(0,r.CE)("div",_,[a.username?((0,r.uX)(),(0,r.CE)("div",N," ÐŸÑ€Ð¸Ð²ÐµÑ‚, @"+(0,u.v_)(a.username)+"! ",1)):(0,r.Q3)("",!0),(0,r.Lk)("button",{class:"settings-btn",onClick:t[0]||(t[0]=t=>e.$emit("open-settings"))}),t[3]||(t[3]=(0,r.Lk)("div",{class:"glass-container"},[(0,r.Lk)("span",{class:"soul-text"},[(0,r.eW)(" Ð¢Ñ‹ Ð½Ðµ Ñ‚Ñ‹, ÐºÐ¾Ð³Ð´Ð°"),(0,r.Lk)("br"),(0,r.eW)("Ð³Ð¾Ð»Ð¾Ð´ÐµÐ½ ")])],-1)),t[4]||(t[4]=(0,r.Lk)("div",{class:"soul-image"},[(0,r.Lk)("img",{src:X,alt:"Soul"})],-1)),(0,r.Lk)("div",W,[(0,r.Lk)("button",{class:"btn calendar",onClick:t[1]||(t[1]=t=>e.$emit("open-calendar"))}," ÐšÐ°Ð»ÐµÐ½Ð´Ð°Ñ€ÑŒ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ñ "),t[2]||(t[2]=(0,r.Lk)("button",{class:"btn stories",disabled:""}," Ð¡ÐºÐ¾Ñ€Ð¾ Ñ‚ÑƒÑ‚ Ð±ÑƒÐ´ÑƒÑ‚ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ð¸ ",-1))])])}var P=n(400),B=n(617);const F={apiKey:"AIzaSyA45HVlArfrCX12RzClqX8yvPWQDjx97iM",authDomain:"iki-nowels.firebaseapp.com",projectId:"iki-nowels",storageBucket:"iki-nowels.firebasestorage.app",messagingSenderId:"1064173724655",appId:"1:1064173724655:web:7292b8b03bf0fe7708cc1a",measurementId:"G-MZD8G11D0Y"},J=(0,P.Wp)(F),K=(0,B.aU)(J),R="https://ikiteam.ru/api",Q={async saveUser(e){try{const t=await fetch(`${R}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telegramId:e})});return t.json()}catch(t){throw console.error("Error saving user:",t),t}},async saveEmotion(e,{emotion:t,note:n,timestamp:o}){return fetch(`${R}/emotions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telegramId:e,emotion:t,note:n,timestamp:o})})},async getUserEmotions(e,t,n){const o=new URLSearchParams({telegramId:e,startDate:t.toISOString(),endDate:n.toISOString()}),r=await fetch(`${R}/emotions?${o}`);return await r.json()},async getUser(e){const t=await fetch(`${R}/users/${e}`);if(!t.ok)throw new Error("User not found");return await t.json()},async saveEmotion(e,t){await K.collection("users").doc(String(e)).collection("emotions").add(t)}},G={name:"MainScreen",data(){return{username:null}},async mounted(){const e=j();if(e)try{const t=await Q.getUser(e);t&&t.login&&(this.username=t.login)}catch(t){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð»Ð¾Ð³Ð¸Ð½Ð°:",t)}}},z=(0,d.A)(G,[["render",Y],["__scopeId","data-v-5a4b4d91"]]),V=z,q={class:"calendar-header"},H=["disabled"],Z={class:"month-title"},ee=["disabled"],te={class:"calendar-grid"};function ne(e,t,n,a,s,i){return(0,r.uX)(),(0,r.CE)("div",{class:"calendar-screen",onClick:t[6]||(t[6]=(...e)=>i.blurInput&&i.blurInput(...e))},[(0,r.Lk)("button",{class:"back-btn",onClick:t[0]||(t[0]=t=>e.$emit("back"))},"ÐÐ°Ð·Ð°Ð´"),(0,r.Lk)("div",q,[(0,r.Lk)("button",{class:"nav-btn",onClick:t[1]||(t[1]=(...e)=>i.prevMonth&&i.prevMonth(...e)),disabled:i.isMinMonth},"<",8,H),(0,r.Lk)("span",Z,(0,u.v_)(i.monthName)+" "+(0,u.v_)(s.currentYear),1),(0,r.Lk)("button",{class:"nav-btn",onClick:t[2]||(t[2]=(...e)=>i.nextMonth&&i.nextMonth(...e)),disabled:i.isMaxMonth},">",8,ee)]),(0,r.Lk)("div",te,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.weekDays,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"calendar-day calendar-day-header",key:e},(0,u.v_)(e),1)))),128)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.firstDayOfWeek,(e=>((0,r.uX)(),(0,r.CE)("div",{key:"empty-"+e,class:"calendar-day empty"})))),128)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.daysInMonth,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:"calendar-day"},(0,u.v_)(e),1)))),128))]),(0,r.Lk)("div",{class:"note-container",onClick:t[5]||(t[5]=(0,o.D$)((()=>{}),["stop"]))},[(0,r.bo)((0,r.Lk)("textarea",{class:"note-input","onUpdate:modelValue":t[3]||(t[3]=e=>s.note=e),placeholder:"ÐÐ°Ð¿Ð¸ÑˆÐµÑˆÑŒ Ð¿Ð°Ñ€Ñƒ ÑÐ»Ð¾Ð² Ð¾ ÑÐµÐ³Ð¾Ð´Ð½ÑÑˆÐ½ÐµÐ¼ Ð´Ð½Ðµ?",rows:"3",ref:"noteInput",onBlur:t[4]||(t[4]=(...e)=>i.onBlur&&i.onBlur(...e))},null,544),[[o.Jo,s.note]])])])}const oe=2025,re=5,ae=1,se={name:"CalendarScreen",data(){const e=new Date,t=re,n=oe,o=e.getMonth(),r=e.getFullYear();return{currentMonth:o,currentYear:r,minMonth:t,minYear:n,weekDays:["ÐŸÐ½","Ð’Ñ‚","Ð¡Ñ€","Ð§Ñ‚","ÐŸÑ‚","Ð¡Ð±","Ð’Ñ"],note:"",isInputFocused:!1}},computed:{monthName(){return["Ð¯Ð½Ð²Ð°Ñ€ÑŒ","Ð¤ÐµÐ²Ñ€Ð°Ð»ÑŒ","ÐœÐ°Ñ€Ñ‚","ÐÐ¿Ñ€ÐµÐ»ÑŒ","ÐœÐ°Ð¹","Ð˜ÑŽÐ½ÑŒ","Ð˜ÑŽÐ»ÑŒ","ÐÐ²Ð³ÑƒÑÑ‚","Ð¡ÐµÐ½Ñ‚ÑÐ±Ñ€ÑŒ","ÐžÐºÑ‚ÑÐ±Ñ€ÑŒ","ÐÐ¾ÑÐ±Ñ€ÑŒ","Ð”ÐµÐºÐ°Ð±Ñ€ÑŒ"][this.currentMonth]},daysInMonth(){const e=new Date(this.currentYear,this.currentMonth+1,0).getDate();return this.currentYear===oe&&this.currentMonth===re?Array.from({length:e-ae+1},((e,t)=>t+ae)):Array.from({length:e},((e,t)=>t+1))},firstDayOfWeek(){let e=new Date(this.currentYear,this.currentMonth,this.currentYear===oe&&this.currentMonth===re?ae:1).getDay();return e=(e+6)%7,e},isMinMonth(){return this.currentYear===this.minYear&&this.currentMonth===this.minMonth},isMaxMonth(){const e=new Date;return this.currentYear===e.getFullYear()&&this.currentMonth===e.getMonth()}},methods:{prevMonth(){this.isMinMonth||(0===this.currentMonth?(this.currentMonth=11,this.currentYear--):this.currentMonth--)},nextMonth(){this.isMaxMonth||(11===this.currentMonth?(this.currentMonth=0,this.currentYear++):this.currentMonth++)},blurInput(){this.isInputFocused&&this.$refs.noteInput.blur()},onBlur(){this.isInputFocused=!1}},watch:{note(){}}},ie=(0,d.A)(se,[["render",ne],["__scopeId","data-v-d0d29410"]]),ce=ie,le={name:"App",components:{LoadingScreen:h,EmotionSelect:x,MainScreen:V,CalendarScreen:ce},data(){return{currentScreen:"loading",selectedEmotion:null,showSettings:!1}},methods:{handleEmotionSelect(e){this.selectedEmotion=e,this.currentScreen="main"},handleNavigate(e){this.currentScreen=e},openSettings(){this.showSettings=!0},openCalendar(){this.currentScreen="calendar"},backToMain(){this.currentScreen="main"}},mounted(){setTimeout((()=>{this.currentScreen="emotion"}),2e3)}},me=(0,d.A)(le,[["render",s]]),de=me;(0,o.Ef)(de).mount("#app")},485:(e,t,n)=>{e.exports=n.p+"img/Ð¢Ñ€ÐµÐ²Ð¾Ð³Ð°.cb2b7443.png"},562:(e,t,n)=>{e.exports=n.p+"img/Ð Ð°Ð´Ð¾ÑÑ‚ÑŒ.225d89ef.png"},644:(e,t,n)=>{e.exports=n.p+"img/Ð“Ñ€ÑƒÑÑ‚ÑŒ.cba9a168.png"},693:(e,t,n)=>{e.exports=n.p+"img/Ð¡Ð¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾.b1a2b402.png"},815:(e,t,n)=>{e.exports=n.p+"img/ÐœÐµÑ‡Ñ‚Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ.a6e023e0.png"}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}n.m=e,(()=>{var e=[];n.O=(t,o,r,a)=>{if(!o){var s=1/0;for(m=0;m<e.length;m++){for(var[o,r,a]=e[m],i=!0,c=0;c<o.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((e=>n.O[e](o[c])))?o.splice(c--,1):(i=!1,a<s&&(s=a));if(i){e.splice(m--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var m=e.length;m>0&&e[m-1][2]>a;m--)e[m]=e[m-1];e[m]=[o,r,a]}})(),(()=>{n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}})(),(()=>{n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{n.p="/"})(),(()=>{var e={524:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,a,[s,i,c]=o,l=0;if(s.some((t=>0!==e[t]))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(c)var m=c(n)}for(t&&t(o);l<s.length;l++)a=s[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(m)},o=self["webpackChunkweb_novels"]=self["webpackChunkweb_novels"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[504],(()=>n(473)));o=n.O(o)})();
//# sourceMappingURL=app.bd0aa83f81c718f0.js.map